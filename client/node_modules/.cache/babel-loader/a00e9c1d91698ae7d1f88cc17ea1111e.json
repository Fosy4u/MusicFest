{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\FosterOgwudu\\\\Desktop\\\\MyProjects\\\\MusicFest\\\\client\\\\src\\\\components\\\\Player.js\",\n    _s2 = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef, usePrevious } from 'react';\nimport SpotifyPlayer from 'react-spotify-web-playback';\nimport { useStateValue } from '../utilities/StateProvider';\nimport './Player.css';\nimport axios from 'axios';\nimport { useHistory } from \"react-router-dom\";\nimport SpotifyWebApi from \"spotify-web-api-js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Player() {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [{\n    user,\n    token,\n    playlists,\n    active_playlist,\n    track,\n    play\n  }, dispatch] = useStateValue();\n  const spotify = new SpotifyWebApi();\n  const prev__track = usePrevious(track);\n  const history = useHistory();\n  useEffect(() => {\n    if (play) {\n      if (prev__track != track) {\n        const lyrics = axios.get('http://localhost:3001/lyrics', {\n          params: {\n            track: track.name,\n            artist: track.artists[0].name\n          }\n        }).then(res => {\n          dispatch({\n            type: 'SET_LYRICS',\n            payload: res.data.lyrics\n          });\n        });\n      }\n    }\n  }, [play, track]);\n  useEffect(() => {\n    if (token) {\n      spotify.setAccessToken(token);\n      spotify.getMyRecentlyPlayedTracks().then(res => {\n        console.log('recent tracks', res);\n      });\n    }\n  }, [token]);\n\n  function usePrevious(value) {\n    _s();\n\n    const ref = useRef();\n    useEffect(() => {\n      ref.current = value;\n    }, []);\n    return ref.current;\n  }\n\n  _s(usePrevious, \"8uVE59eA/r6b92xF80p7sH8rXLk=\");\n\n  function stop__play() {\n    dispatch({\n      type: 'SET_PLAY',\n      payload: false\n    });\n  }\n\n  function lyrics__page() {\n    history.push('/lyrics');\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"footer\",\n    children: /*#__PURE__*/_jsxDEV(SpotifyPlayer, {\n      token: token ? token : null,\n      showSaveIcon: true,\n      callback: state => {\n        if (!state.isPlaying) stop__play();\n      },\n      callback: state => {\n        if (state.isPlaying) lyrics__page();\n      },\n      play: play ? play : null,\n      uris: track ? [track.uri] : [],\n      name: \"MusicFest\",\n      autoPlay: true,\n      persistDeviceSelection: true,\n      magnifySliderOnHover: true,\n      styles: {\n        activeColor: '#fff',\n        bgColor: '#333',\n        color: '#42f575',\n        loaderColor: '#fff',\n        sliderColor: '#1cb954',\n        trackArtistColor: '#ccc',\n        trackNameColor: '#fff'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 1\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(Player, \"PFgl35vBFFdBAwU1cI0h+vIOsEc=\", false, function () {\n  return [useStateValue, usePrevious, useHistory];\n});\n\n_c = Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"sources":["C:/Users/FosterOgwudu/Desktop/MyProjects/MusicFest/client/src/components/Player.js"],"names":["React","useState","useEffect","useRef","usePrevious","SpotifyPlayer","useStateValue","axios","useHistory","SpotifyWebApi","Player","user","token","playlists","active_playlist","track","play","dispatch","spotify","prev__track","history","lyrics","get","params","name","artist","artists","then","res","type","payload","data","setAccessToken","getMyRecentlyPlayedTracks","console","log","value","ref","current","stop__play","lyrics__page","push","state","isPlaying","uri","activeColor","bgColor","color","loaderColor","sliderColor","trackArtistColor","trackNameColor"],"mappings":"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","sourcesContent":["import React,{useState, useEffect, useRef, usePrevious} from 'react';\r\nimport SpotifyPlayer from 'react-spotify-web-playback';\r\nimport { useStateValue } from '../utilities/StateProvider';\r\nimport './Player.css';\r\nimport axios from 'axios';\r\nimport { useHistory } from \"react-router-dom\"\r\nimport SpotifyWebApi from \"spotify-web-api-js\";\r\n\r\nexport default function Player() {\r\n    const [{user,token, playlists, active_playlist, track, play}, dispatch] = useStateValue();\r\n    const spotify = new SpotifyWebApi();\r\n    \r\n    const prev__track = usePrevious(track)\r\n    const history = useHistory()\r\nuseEffect(() => {\r\n    if(play){\r\n        \r\n        if(prev__track != track){\r\n         \r\n            const lyrics = axios.get('http://localhost:3001/lyrics', {\r\n                params:{\r\n                    track: track.name,\r\n                    artist: track.artists[0].name\r\n                }\r\n            }).then(res =>{\r\n                dispatch({\r\n                    type : 'SET_LYRICS',\r\n                    payload: res.data.lyrics\r\n                \r\n                  })\r\n\r\n\r\n            })\r\n            \r\n        }\r\n        \r\n    }\r\n}, [play,track])\r\n\r\nuseEffect(() => {\r\n    if(token){\r\n    spotify.setAccessToken(token); \r\n    spotify.getMyRecentlyPlayedTracks().then(res => {console.log('recent tracks', res)})  \r\n    }\r\n  \r\n    \r\n}, [token])\r\n\r\nfunction usePrevious (value) {\r\n    const ref = useRef();\r\n    useEffect(() => {\r\n      ref.current = value;\r\n    }, []);\r\n    return ref.current\r\n}\r\n  \r\n    function stop__play(){\r\n        dispatch({\r\n            type : 'SET_PLAY',\r\n            payload: false\r\n        \r\n          })\r\n    }\r\n\r\n    function lyrics__page(){\r\n        history.push('/lyrics')\r\n    }\r\n    return (\r\n        <div className='footer'>\r\n<SpotifyPlayer \r\n        token = {token? token:null}\r\n        showSaveIcon\r\n        callback={state =>{if(!state.isPlaying)stop__play()}}\r\n        callback={state =>{if(state.isPlaying)lyrics__page()}}\r\n       \r\n        play={play?play:null}\r\n        uris={track?[track.uri]:[]}\r\n        name='MusicFest'\r\n        autoPlay={true}\r\n        persistDeviceSelection= {true}\r\n        magnifySliderOnHover={true}\r\n        \r\n        styles={{\r\n            activeColor: '#fff',\r\n            bgColor: '#333',\r\n            color: '#42f575',\r\n            loaderColor: '#fff',\r\n            sliderColor: '#1cb954',\r\n            trackArtistColor: '#ccc',\r\n            trackNameColor: '#fff',\r\n          }}\r\n       \r\n        />\r\n        </div>\r\n        \r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}